' Diagram showing sequence of tasks to set up PMM Client for MySQL
' Syntax: https://plantuml.com/activity-diagram-beta
' Icons: https://plantuml.com/openiconic
' Colour: https://plantuml.com/color
' Text: https://plantuml.com/creole
@startuml "setting-up_client_mysql"
skinparam ArrowHeadColor none
skinparam roundCorner 10
'title "Setting up PMM Client to monitor a MySQL host\nOverview\n"



partition "1. Choose and configure a source" {

	if (Choose a source) then (**//slow query log//**)
'		split
'			-[hidden]->
			:1.1. Configure\n**//slow query log//**;
			:1.2. (Optional for Percona Server for\nMySQL 5.7+, MariaDB 10.0+)\nConfigure **//query response time//**;
			:1.3. (Optional) Configure\n**//tablestats//**;
	else (**//Performance Schema//**)
'		split again
'			-[hidden]->
			:1.4. Configure\n**//Performance Schema//**;
			:1.5. Configure\n**//Query Analytics//**;
'		end split
	endif
	:1.6. (Optional) Configure\n**//user statistics//**;
	:1.7. (Optional) Create database\naccount for PMM;
}
partition "2. Add service" {
	split
	partition "2.1. With the **//user interface//**" {
		:PMM <&arrow-thick-right>\nPMM Add Instance <&arrow-thick-right>\nMySQL - Add a remote instance;
	}
'	kill
	split again

	partition "2.2. On the **//command line//**" {
		split
		:**//slow query log//**

<code>
		pmm-admin add mysql
		--query-source=slowlog
		--size-slow-logs=N
		...
</code>;

'		kill
		split again
		:**//Performance Schema//**

<code>
		pmm-admin add mysql
		--query-source=perfschema
		...
</code>;
'		kill
		end split
	}
end split
}

:3. Check;

@enduml
